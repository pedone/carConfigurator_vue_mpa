!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).myBundle=e()}}(function(){return function s(o,c,a){function d(t,e){if(!c[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=c[t]={exports:{}};o[t][0].call(r.exports,function(e){return d(o[t][1][e]||e)},r,r.exports,s,o,c,a)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.buildVue=function(e){return new Vue({el:"#app",data:{selectedPaintId:s(e.Paints),selectedRimsId:s(e.Rims),engineSettingsById:r(e.EngineSettings),accessoriesById:r(e.Accessories),accesoryCountByCategory:{}},created:function(){this._getSelectedAccessoryIds=function(){return _.map(this.selectedAccessories,function(e){return e.id})},this._paintById=r(e.Paints),this._rimsById=r(e.Rims),this._initialAccessoryIds=this._getSelectedAccessoryIds(),this._initialEngineSettings=this.selectedEngineSettings,this._initialPaintId=this.selectedPaintId,this._initialRimsId=this.selectedRimsId},computed:{selectedPaint:function(){return this._paintById[this.selectedPaintId]},selectedRims:function(){return this._rimsById[this.selectedRimsId]},selectedAccessories:function(){var e=_.values(this.accessoriesById);return _.filter(e,function(e){return e.isSelected})},basePrice:function(){return this.selectedEngineSettings&&this.selectedEngineSettings.price||0},formattedBasePrice:function(){return n.formatCurrency(this.basePrice)},extrasPrice:function(){var e=_.reduce(this.selectedAccessories,function(e,t){return e+t.price},0);return e+(this.selectedPaint&&this.selectedPaint.price)+(this.selectedRims&&this.selectedRims.price)},formattedExtrasPrice:function(){return n.formatCurrency(this.extrasPrice)},formattedFullPrice:function(){return this.basePrice+this.extrasPrice},selectedEngineSettings:function(){var e=_.values(this.engineSettingsById);return _.first(_.filter(e,function(e){return e.isSelected}))}},watch:{selectedAccessories:{immediate:!0,handler:function(e){this.accesoryCountByCategory={};var t=!0,i=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;this.accesoryCountByCategory[o.category]=(this.accesoryCountByCategory[o.category]||0)+1}}catch(e){i=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw n}}}}},methods:{selectPaint:function(e){this.selectedPaintId=e},toggleAccessorySelection:function(e){this.accessoriesById[e].isSelected=!this.accessoriesById[e].isSelected},selectEngineSettings:function(t){_.each(this.engineSettingsById,function(e){e.isSelected=e.id===t})},saveChanges:function(e){var t=this._getSelectedAccessoryIds(),i=this._initialAccessoryIds.length!==t.length||0<_.difference(this._initialAccessoryIds,t).length,n=this._initialEngineSettings!=this.selectedEngineSettings,r=this._initialPaintId!=this.selectedPaintId,s=this._initialRimsId!=this.selectedRimsId;if(i||n||r||s){var o={__RequestVerificationToken:e};r&&(o.paintId=this.selectedPaintId),s&&(o.rimId=this.selectedRimsId),n&&(o.engineSettingsId=this.selectedEngineSettings.id),i&&(o.accessoryIds=t),console.debug("saving configuration changes"),$.ajax({async:!1,type:"POST",url:"/Configuration/UpdateActiveConfiguration",data:o,contentType:"application/x-www-form-urlencoded"}).fail(function(e){console.error("failed to save configuration changes: "+e.responseText+" ("+e.statusText+")"),console.debug(JSON.stringify(e))})}else console.debug("no configuration changes")}}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}}(e("./Helper.js"));function r(e){var i={};return _.each(e,function(e){var t;i[e.Id]={id:(t=e).Id,category:t.Category,isSelected:t.IsSelected,name:t.Name,price:t.Price,size:t.Size}}),i}function s(e){return e&&0!==e.length?(_.find(e,function(e){return e.IsSelected})||e[0]).Id:-1}},{"./Helper.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.saveViewModel=function(e,t,i,n){var r,s={__RequestVerificationToken:i};t&&(s.id=t);if(n)for(r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);return $.ajax({type:"POST",url:e,data:s,contentType:"application/x-www-form-urlencoded"})},i.getAntiForgeryToken=function(e){return e.find('[name="__RequestVerificationToken"]').val()},i.formatCurrency=function(e){return e.toLocaleString()+" EUR"}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.saveViewModel=function(e,t,i,n){var r,s={__RequestVerificationToken:i};t&&(s.id=t);if(n)for(r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);return $.ajax({type:"POST",url:e,data:s,contentType:"application/x-www-form-urlencoded"})},i.getAntiForgeryToken=function(e){return e.find('[name="__RequestVerificationToken"]').val()},i.formatCurrency=function(e){return e.toLocaleString()+" EUR"}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.helper=i.configurationViewModel=void 0;var n=s(e("../../Scripts/app/ConfigurationViewModel.js"));i.configurationViewModel=n;var r=s(e("../../Scripts/app/helper.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}i.helper=r},{"../../Scripts/app/ConfigurationViewModel.js":1,"../../Scripts/app/helper.js":3}]},{},[4])(4)});